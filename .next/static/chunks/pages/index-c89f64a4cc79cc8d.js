(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(9989)}])},9989:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return H},default:function(){return X}});var n=r(5893),a=r(9008),s=r.n(a),i=r(5966),o=r(7294),c=r(4051),l=r.n(c),u=r(5506),d=r(4634),f=r(5601),x=r(9050),m=r(2450),p=r(6228),h=r(19),b=r(774),v=r(3299),y=(r(5152),r(6638));function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t,r,n,a,s,i){try{var o=e[s](i),c=o.value}catch(l){return void r(l)}o.done?t(c):Promise.resolve(c).then(n,a)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function i(e){j(s,n,a,i,o,"next",e)}function o(e){j(s,n,a,i,o,"throw",e)}i(void 0)}))}}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){N(e,t,r[t])}))}return e}function k(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.useRef)();return(0,o.useEffect)((function(){r.e(787).then(r.bind(r,3923)).then((function(r){new r.Picker(S({},e,{data:y,ref:t}))}))}),[]),(0,n.jsx)("div",{ref:t})}var _=function(){var e=(0,v.useSession)().data,t=(0,o.useState)(""),r=t[0],a=t[1],s=(0,o.useState)(!1),i=s[0],c=s[1],y=(0,o.useState)(null),g=y[0],j=y[1],N=(0,o.useRef)(null),S=(0,o.useState)(!1),_=S[0],A=S[1],C=function(){var t=w(l().mark((function t(){var n,s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=2;break}return t.abrupt("return");case 2:return c(!0),t.next=5,(0,h.ET)((0,h.hJ)(p.db,"posts"),{id:e.user.uid,username:e.user.name,userImg:e.user.image,tag:e.user.tag,text:r,timestamp:(0,h.Bt)()});case 5:if(n=t.sent,s=(0,b.iH)(p.t,"posts/".concat(n.id,"/image")),!g){t.next=10;break}return t.next=10,(0,b.sf)(s,g,"data_url").then(w(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.Jt)(s);case 2:return t=e.sent,e.next=5,(0,h.r7)((0,h.JU)(p.db,"posts",n.id),{image:t});case 5:case"end":return e.stop()}}),e)}))));case 10:c(!1),a(""),j(null),A(!1);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,n.jsxs)("div",{className:"border-b border-gray-700 p-3 flex space-x-3 overflow-y-scroll scrollbar-hide ".concat(i&&"opacity-60"),children:[(0,n.jsx)("img",{src:e.user.image,alt:"",className:"h-11 w-11 rounded-full cursor-pointer",onClick:v.signOut}),(0,n.jsxs)("div",{className:"divide-y divide-gray-700 w-full",children:[(0,n.jsxs)("div",{className:"".concat(g&&"pb-7"," ").concat(r&&"space-y-2.5"),children:[(0,n.jsx)("textarea",{value:r,onChange:function(e){return a(e.target.value)},placeholder:"What's happening?",rows:"2",className:"bg-transparent outline-none text-[#d9d9d9] text-lg placeholder-gray-500 tracking-wide w-full min-h-[50px]"}),g&&(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute w-8 h-8 bg-[#15181c] hover:bg-[#272c26] bg-opacity-75 rounded-full flex items-center justify-center top-1 left-1 cursor-pointer",onClick:function(){return j(null)},children:(0,n.jsx)(u.Z,{className:"text-white h-5"})}),(0,n.jsx)("img",{src:g,alt:"",className:"rounded-2xl max-h-80 object-contain"})]})]}),!i&&(0,n.jsxs)("div",{className:"flex items-center justify-between pt-2.5",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsxs)("div",{className:"icon",onClick:function(){return N.current.click()},children:[(0,n.jsx)(d.Z,{className:"text-[#1d9bf0] h-[22px]"}),(0,n.jsx)("input",{type:"file",ref:N,hidden:!0,onChange:function(e){var t=new FileReader;e.target.files[0]&&t.readAsDataURL(e.target.files[0]),t.onload=function(e){j(e.target.result)}}})]}),(0,n.jsx)("div",{className:"icon rotate-90",children:(0,n.jsx)(f.Z,{className:"text-[#1d9bf0] h-[22px]"})}),(0,n.jsx)("div",{className:"icon",onClick:function(){return A(!_)},children:(0,n.jsx)(x.Z,{className:"text-[#1d9bf0] h-[22px]"})}),(0,n.jsx)("div",{className:"icon",children:(0,n.jsx)(m.Z,{className:"text-[#1d9bf0] h-[22px]"})}),_&&(0,n.jsx)(O,{onSelect:function(e){var t,n=e.unified.split("-"),s=[];n.forEach((function(e){return s.push("0x"+e)}));var i=(t=String).fromCodePoint.apply(t,k(s));a(r+i)},style:{position:"absolute",marginTop:"465px",marginLeft:-40,maxWidth:"320px",borderRadius:"20px"},theme:"dark"})]}),(0,n.jsx)("button",{className:"bg-[#1d9bf0] text-white rounded-full px-4 py-1.5 font-bold shadow-md hover:bg-[#1a8cd8] disabled:hover:bg-[#1d9bf0] disabled:opacity-50 disabled:cursor-default",disabled:!r&&!g,onClick:C,children:"Tweet"})]})]})]})},A=r(3517);var C=function(){(0,v.useSession)().data;var e=(0,o.useState)([]),t=e[0],r=e[1];return(0,o.useEffect)((function(){return(0,h.cf)((0,h.IO)((0,h.hJ)(p.db,"posts"),(0,h.Xo)("timestamp","desc")),(function(e){r(e.docs)}))}),[p.db]),(0,n.jsxs)("div",{className:"flex-grow border-l border-r border-gray-700 max-w-2xl sm:ml-[73px] xl:ml-[370px]",children:[(0,n.jsxs)("div",{className:"text-[#d9d9d9] flex items-center sm:justify-between py-2 px-3 sticky top-0 z-50 bg-black border-b border-gray-700",children:[(0,n.jsx)("h2",{className:"text-lg sm:text-xl font-bold",children:"Home"}),(0,n.jsx)("div",{className:"hoverAnimation w-9 h-9 flex items-center justify-center xl:px-0 ml-auto",children:(0,n.jsx)(i.Z,{className:"h-5 text-white"})})]}),(0,n.jsx)(_,{}),(0,n.jsx)("div",{className:"pb-72",children:t.map((function(e){return(0,n.jsx)(A.Z,{id:e.id,post:e.data()},e.id)}))})]})},E=r(6193),P=r(6690),Z=r(7969),R=r(7274),I=r(2387),T=r(4480);function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s=[],i=!0,o=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(c){o=!0,a=c}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H=!0;function X(e){var t=e.trendingResults,r=e.followResults,a=e.providers,i=(0,v.useSession)().data,o=U((0,T.FV)(I.e),2),c=o[0];o[1];return i?(0,n.jsxs)("div",{className:"",children:[(0,n.jsxs)(s(),{children:[(0,n.jsx)("title",{children:"Home / Twitter"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)("main",{className:"bg-black min-h-screen flex max-w-[1500px] mx-auto",children:[(0,n.jsx)(E.Z,{}),(0,n.jsx)(C,{}),(0,n.jsx)(P.Z,{trendingResults:t,followResults:r}),c&&(0,n.jsx)(R.Z,{})]})]}):(0,n.jsx)(Z.Z,{providers:a})}}},function(e){e.O(0,[16,885,314,964,525,739,774,888,179],(function(){return t=5557,e(e.s=t);var t}));var t=e.O();_N_E=t}]);